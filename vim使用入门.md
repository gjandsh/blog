# Vim使用入门

Vim是一款极其强大的编辑器，因其代码补全、编译及错误跳转等方便编程的功能而受到广大程序员的青睐。然而vim极其陡峭的学习曲线让许多第一次接触它的人望而却步。开始学习vim时往往会觉得痛苦，但是在掌握一些基本操作后，通过不断的练习，编辑的效率会得到大幅度的提升。下面本文将介绍一些vim的基本操作。
### vim的几种模式
1. 命令行模式
这是刚打开vim的时候进入的模式，在此模式之下，可以输入会被解释与执行的命令。
2. 插入模式
在此模式之下，大部分键盘输入被作为文本插入。
3. 可视化模式
可视化模式可以通过移动命令选中字符、行或一块文本，被选中的部分会高亮显示。当执行一个非移动命令时，命令会被执行到整个高亮区域。
4. 几种模式的转换
- 从命令行模式到插入模式
```
i  在当前位置之前插入
a  在当前位置之后插入(追加)
I  调到当前行第一个非空白字符之前插入
A  调到当前行最后一个字符之后插入
```
- 从命令行模式到可视模式
```
 v  切换到可视模式(字符级别)
  V  切换到可视模式(行级别)
   ctrl-v  切换到块可视模式(块级别的)
   ```
   按ESC可以退出插入模式或可视模式，回到命令行模式。
   ### vim的基本命令
   - 移动
   在上一小节已经介绍了如何从命令行模式转为插入模式，并通过`i`，`a`，`I`，`A`这几个命令输入文本。而如何在文本中进行移动，有如下命令：
   ```
   //基础命令
   h  左移
   l  右移
   k  上移
   j  下移 （像一个向下的钩子）
   或者使用方向键的上下左右
   //进阶命令
   0  移动至当前行第一列
   ^  当前行第一个非空白字符
   w  移到下一个单词（第一个字符之前）
   W  移到下一个单词，忽略标点
   e  移动到单词尾部（最后一个字符之前）
   E  移动到单词尾部，忽略标点
   b  移动到单词开头
   B  移动到单词开头，忽略标点
   ge  移动到前一个词尾部
   gE  移动到前一个词尾部，忽略标点
   g_  移动到最后一个非空白字符
   $  移动到最后一列（最后一个字符之前）
   ```
   - 编辑（增、删、改、查）
   ```
   //增
   o  在光标所在行的下方打开新的行
   O  在光标所在行的上方打开新的行
   //删
   d  删除当前光标位置到下一个命令所指定的位置之间的所有字符，并将删除的内容存到剪贴板里(例如: dw删除当前行光标位置到后一个单词间的所有字符)
   dd  删除当前行
   x  删除光标位置字符
   X  删除光标之前的字符(相当于回退)
   //改
   y  拷贝
   p  在当前光标之后黏贴拷贝的内容
   P  在当前光标之前黏贴拷贝的内容
   c  修改当前光标位置到下一个命令所指定的位置之间的所有字符（例如：c$删除当前行光标位置到当前行末的之间的所有字符，同时进入插入模式）
   r  替换当前字符
   R  连续替换多个字符
   :r filename  向当前文件中插入另外文件的内容
   :s/old/new  替换光标所在行第一个匹配字符串
   :s/old/new/g  替换光标所在行所有匹配字符串
   :#,#s/old/new/g  替换两行间所有匹配字符串，#表示两个行号
   :%s/old/new/g  替换整个文件中所有匹配字符串
   :%s/old/new/gc  找到整个文件中所有匹配字符串，并询问是否替换
   s  用输入替换当前位置到下一个命令给出位置的字符
   //查
   /pattern  查找（高亮） pattern 的字符串
   %  查找配对的括号）、]、}
   * 和 #  匹配光标当前所在的单词，移动光标到下一个（或上一个）匹配单词（*是下一个，#是上一个）
   :set ic  查找的时候忽略大小写
   :set hls  高亮显示所有匹配短语
   :set is  查找短语时显示部分匹配
   ```
   - 其他基本操作
   ```
   //打开/保存/退出
   :e <path/to/file>  打开文件
   :w  存盘
   :saveas<path/to/file>  文件另存为
   :x，ZZ 或 :wq  保存并退出 (:x 表示仅在需要时保存，ZZ不需要输入冒号并回车)
   :q!  退出不保存
   :qa!  强行退出所有的正在编辑的文件，就算别的文件有更改。
   :bn 和 :bp  在多个打开的文件中做上下切换。
   //可视模式下(ctrl+v)
   J  把所有的行连接起来（变成一行）
   < 或 >  左右缩进
   =  自动缩进
   //分屏
   :split  创建分屏
   :vsplit  创建垂直分屏
   <ctrl-w><dir>  dir表示方向，可以是 hjkl 或是 ←↓↑→ ，用来切换分屏。
   <ctrl-w>_(或 <ctrl-w>|)  最大化尺寸
   <ctrl-w>+ (或<ctrl-w>-)  增加尺寸
   //其它
   N command  重复一个命令N次
   .  重复上一个命令
   :help  使用在线帮助系统
   <ctrl-D>和<TAB>  可以进行命令行补全
   ```
   ### 小结
   以上介绍的是vim的一些基本操作，基本覆盖了大多数常用命令。而为了让vim强大的特性和功能得到充分的发挥，通常可以通过配置vimrc文件来实现，本文仅介绍一些基础操作，不做展开。
   总而言之，vim是一款强大的编辑器，但它的优点要等到熟练掌握它之后才会显现。学习vim需要记住大量的命令，可以通过vimtutor来进行练习，常用便能长记。
